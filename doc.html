<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-2"/>
    <title>Projekt IIS</title>
    <style type="text/css">
    	table { border-collapse: collapse; }
    	td, th { border: 1px solid black; padding: 0.3em 0.5em; text-align: left; }
    	dt { font-weight: bold; margin-top: 0.5em; }
    </style>
</head>
<body>

<!-- Zkontrolujte prosím nastavení kódování v hlavičce dokumentu 
     podle použitého editoru -->

<h1>Chytré město </h1>

<dl>
	<dt>Autoři</dt>
	<dd>Tadeáš Kachyna <!-- Nahraďte skutečným jménem a e-mailem autora a popisem činnosti -->
	    <a href="mailto:xkachy00@stud.fit.vutbr.cz">xkachy00@stud.fit.vutbr.cz</a> -
		 založení projektu a implementace základního backendu, implementace autentizace a autorizace, frontend, zprovoznění vzdáleného server
	</dd>
	<dd>Lada Krofingerová <!-- Nahraďte skutečným jménem a e-mailem autora a popisem činnosti -->
	    <a href="mailto:xkrofi00@stud.fit.vutbr.cz">xkrofi00@stud.fit.vutbr.cz</a> - 
		backend (API, databáze, modely)
	</dd>
  <dd>Lucia Makaiová <!-- Nahraďte skutečným jménem a e-mailem autora a popisem činnosti -->
	    <a href="mailto:xmakai00@stud.fit.vutbr.cz">xmakai00@stud.fit.vutbr.cz</a> - 
		backend (API, databáze, správa rolí), zprovoznění databáze na vzdáleném serveru
	</dd>
	<dt>URL aplikace</dt>
	<dd><a href="https://smart-city-test.herokuapp.com/">https://smart-city-test.herokuapp.com/</a></dd>
</dl>

<h2>Uživatelé systému pro testování</h2>
<p>Uveďte prosím existující zástupce <strong>všech rolí uživatelů</strong>.</p>
<table>
<tr><th>Login</th><th>Heslo</th><th>Role</th></tr>
<tr><td>admin</td><td>admin</td><td>Administrátor</td></tr>
<tr><td>spravce</td><td>spravce</td><td>Správce</td></tr>
<tr><td>technik</td><td>technik</td><td>Technik</td></tr>
<tr><td>obyvatel</td><td>obyvatel</td><td>Obyvatel</td></tr>
</table>

<p>IS implementuje role a případy užití definované zadáním.</p> 

<h3>Video</h3>

<p>https://youtu.be/5HYea20Skgg</p> 

<h2>Implementace</h2>
<p>Aplikace se skláda z 3 základních částí - databáze, back-end, front-end. Databáze je implementována pomocí SŘBD PostgreSQL a je přepojená s back-endem pomocí knihovny SQLAlchemy. Na implementaci back-endu používáme framework Django a pro front-end jsme zvolili webový framework React. </p>
<p>V části api/ se v souboru models.py nachází definované modely. Soubor views.py obsahuje API endpointy pro komunikaci s frontendem pomocí GET a POST requestů, na zabezpečení klasických CRUD operací s databázovými objekty.</p>

<h3>Databáze</h3>
<p style="text-align:center;"><img src="db.png" alt="Schéma relační databáze" height="800" ></p>
	
<h3>Autentizace</h3>
<p>Je řešena za pomocí Json Web Tokenů (JWT), tokeny jsou dva, přístupový a obnovovací, které mají svou dobu expirace (5 minut a 90 dní). Tokeny jsou ukládány do místního úložiště ve webovém prohlížeči. Uchováváme si v něm navíc kromě uživatelského jména a hesla také uživatelskou roli, která nám  usnadňuje práci a minimalizuje  přístup do DB. Pomocí přístupového tokenu, který dostaneme importováním AuthContextu, taktéž realizujeme volání metod na API.</p>

<h3>Autorizace</h3>
<p>Autorizace je řešena za pomocí privátních cest, tzv. „Private Routes“, kterými „obalujeme“ jednotlivé stránky a určujeme, kdo k nim má přístup (na základě role, přihlášený, nepřihlášený). </p>

<h3>Frontend</h3>
<p>Jak bylo zmíněno, je implementován za pomocí knihovny ReactJS společně s HTML+CSS. Je členěn ve složce /frontend/Pages na stránky, které jsou volány z App.js, tam je taktéž řešená autorizace. Tzv. domovským bodem pro každého uživatele, nehledě na roli, je HomePage odkud se může odkazovat na další stránky. Některé stránky implementují /frontend/Compoments také komponenty. Autentizační proces se nacházi v AuthContext.js</p>
	

<h2>Instalace</h2>
<h3>Prerekvizity</h3>
<p>Python 3+, Django 2+</p>
<h3>Postup spuštení</h3>
<ul>
<li>V hlavní složce projektu (se souborem manage.py):</li>
<li>Instalujte softwarové požadavky pomocí pip install -r /cesta/k/requirements.txt</li>
<li>Spustite server pomocí: python3 manage.py runserver</li>
<li>Stránka by měla být přístupná na http://127.0.0.1:8000/</li>
</ul>

<h2>Známé problémy</h2>
<p>Zde popište, které body zadání nejsou implementovány a z jakého důvodu. Např. &bdquo;Z časových důvodů nebyla implementována správa uživatelů.&rdquo; Pomůžete tím zrychlit hodnocení, když neimplementované funkce nebudeme muset dlouze hledat.</p>

</body>
</html>
